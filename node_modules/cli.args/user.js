// var args = require('./index.js')('p:!');
var options = [
	'port:!',
	'version',
	'help',
	'host:'
];
var args = require('./index.js')(options);
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(args.port, '127.0.0.1');
console.log('Server running at http://127.0.0.1:'+args.port+'/');

console.log(args.info.summary);
// var cli_args = require('./index.js');

// try {
//     var args = cli_args(['port:!','s','u'], {
//     	pre: "CoolApp.js, is a cool utility that can be used to do this, that and the other.",
//     	post: "Copyright \u00A9 2014 Awesome developers :)",
//     	port: ['port_number', 'The port number to run the server on'],
//     	s: ['Set the s flag to enable ...'],
//     	u: ['Set the flag to enable option u']
//     });
//     console.log('--port=' + args.port);
//     console.log('-s set? ' + (args.s ? 'y': 'n'));
//     console.log('-u set? ' + (args.u ? 'y': 'n'));
// } catch (e) {
// 	console.log(e.message);
// 	console.log('Usage: ' + e.usage);
// 	return -1;
// }

// console.log(args.info.summary);

// try {
// 	var args = require('./index.js')('p:!su');
// } catch(e) {
// 	// for (var i in e) {
// 	// 	console.log(i+':', e[i]);
// 	// }
// 	// console.error('Caught:', e);
// 	console.error('Command error:', e.message);
// }
// console.log('-p value: '+ args.p + ', -s set: ' + (args.s ? 'y' : 'n'));
// console.log('-p value: '+ args.p + ', -s set: ' + (args.s ? 'yes' : 'no') + ', -u set: ' + (args.u ? 'yes' : 'no'));
// console.log('-p? ' + (args.p ? "y" : "n"), ', -s? ' + (args.s ? 'y' : 'n'), ', -u? ' + (args.u ? 'y' : 'n'));
// console.log('-p value:', args.p);
// console.log('-s set?', args.s ? "yes" : "no");
// console.log(args);
// var args2 = require('./index.js')(['port:', 'debug!']);
// console.log('--port=' + args2.port);
// console.log('--debug? ' + (args2.debug ? 'y': 'n'));

// console.log('Usage:', args2);
// console.log('Usage:', args2.info.usage);